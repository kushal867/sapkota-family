{% extends 'base.html' %}

{% block title %}{% if image %}Edit{% else %}Upload{% endif %} Image{% endblock %}

{% block content %}
<h1>{% if image %}Edit{% else %}Upload{% endif %} Image</h1>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        <input type="text" class="form-control" id="title" name="title" 
               value="{{ image.title|default:'' }}" required>
    </div>
    
    <div class="mb-3">
        <label for="image" class="form-label">Image</label>
        <input type="file" class="form-control" id="image" name="image" {% if not image %}required{% endif %}>
        {% if image.image %}
        <div class="mt-2">
            <p>Current image:</p>
            <img src="{{ image.image.url }}" alt="{{ image.title }}" class="img-thumbnail" style="max-height: 200px;">
        </div>
        {% endif %}
    </div>
    
    <div class="mb-3">
        <label for="caption" class="form-label">Caption</label>
        <textarea class="form-control" id="caption" name="caption" rows="3">{{ image.caption|default:'' }}</textarea>
    </div>
    
    <button type="submit" class="btn btn-primary">Save</button>
    <a href="{% url 'gallery_list' %}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}